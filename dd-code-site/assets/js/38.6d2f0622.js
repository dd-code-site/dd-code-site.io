(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{529:function(s,a,t){"use strict";t.r(a);var e=t(6),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"安装扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展"}},[s._v("#")]),s._v(" 安装扩展")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[s._v(" composer "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" predis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("predis\n composer "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" illuminate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"引入redis支持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#引入redis支持"}},[s._v("#")]),s._v(" 引入redis支持")]),s._v(" "),t("p",[s._v("在目录"),t("code",[s._v("bootstrap/app.php")]),s._v("中要引入redis的扩展")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("register")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[s._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("RedisServiceProvider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"启动辅助函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动辅助函数"}},[s._v("#")]),s._v(" 启动辅助函数")]),s._v(" "),t("blockquote",[t("p",[s._v("Lumen和Laravel有些不一样，默认’Facades’和’Eloquent’是没有启用的，要想像laravel中使用redis一样，要把文件"),t("code",[s._v("bootstrap/app.php")]),s._v("里的 "),t("code",[s._v("Facades")]),s._v(" 和 "),t("code",[s._v("Eloquent")]),s._v(" 的"),t("code",[s._v("$app->withFacades()")]),s._v(" 和 "),t("code",[s._v("$app->withEloquent()")]),s._v("注释打开就好了")])]),s._v(" "),t("h2",{attrs:{id:"配置redis服务器参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置redis服务器参数"}},[s._v("#")]),s._v(" 配置redis服务器参数")]),s._v(" "),t("blockquote",[t("p",[s._v("默认系统是调用的"),t("code",[s._v(".env")]),s._v("里的redis配置文件，但是一般安装后没有这些参数，可以查看文件路径"),t("code",[s._v("vendor/laravel/lumen-framework/config/database.php")]),s._v("中查看有哪些参数需要配置，例如，我的"),t("code",[s._v(".env")]),s._v("文件需要配置")])]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("REDIS_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("REDIS_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("REDIS_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"使用redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用redis"}},[s._v("#")]),s._v(" 使用Redis")]),s._v(" "),t("p",[s._v("首先要在使用redis的控制器内引入类")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Support"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Facades"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Redis")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后直接使用")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("Redis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'site_name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'Lumen的redis'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("Redis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'site_name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);