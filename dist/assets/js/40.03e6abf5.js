(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{534:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[s._v("#")]),s._v(" 代码")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword type-casting"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出"}},[s._v("#")]),s._v(" 输出")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[s._v("#")]),s._v(" 分析")]),s._v(" "),a("p",[s._v("如果你仔细看过在PHP手册中，对于浮点数据类型的说明，就会看到其中有专门的一个警告提示，就谈到这个问题：")]),s._v(" "),a("p",[s._v("关于浮点数精度的警告：显然简单的十进制分数如同 "),a("code",[s._v("0.1")]),s._v(" 或 "),a("code",[s._v("0.7")]),s._v(" 不能在不丢失一点点精度的情况下转换为内部二进制的格式。")]),s._v(" "),a("p",[s._v("这就会造成混乱的结果：")]),s._v(" "),a("p",[s._v("例如，"),a("code",[s._v("floor((0.1+0.7)*10)")]),s._v(" 通常会返回 "),a("code",[s._v("7")]),s._v(" 而不是预期中的  "),a("code",[s._v("8")]),s._v("，因为该结果内部的表示其实是类似 "),a("code",[s._v("7.9")]),s._v("。")]),s._v(" "),a("p",[s._v("这和一个事实有关，那就是不可能精确的用有限位数表达某些十进制分数。例如，十进制的 "),a("code",[s._v("1/3")]),s._v(" 变成了 "),a("code",[s._v("0.3")]),s._v("。")]),s._v(" "),a("p",[s._v("所以永远不要相信浮点数结果精确到了最后一位，也永远不要比较两个浮点数是否相等。如果确实需要更高的精度，应该使用任意精度数学函数或者 "),a("code",[s._v("gmp")]),s._v(" 函数。")]),s._v(" "),a("p",[s._v("实际上，并不是PHP会有这种现象，对于其他计算机语言，类似的浮点数问题也是差不多的。")])])}),[],!1,null,null,null);t.default=n.exports}}]);