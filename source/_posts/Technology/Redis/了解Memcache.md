---
title: 了解Memcache
categories:
  - 技术开发
  - 数据库
  - Memcache
abbrlink: 2253204330
---

## memcache 概述
memcache 就是一个数据库，但是数据存在内存中。常用来做缓存服务器、将数据库查询的数据缓存起来，减少数据库缓存、加快查询速度。
memcache 的数据仅保存在内存中，服务器重启后，数据将会丢失。

## memcache 使用场景
缓存服务器

## 适合存储的数据
- 访问比较频繁的数据，安全性较差的数据，丢失无所谓的数据
- 数据更新比较频繁的数据，比如用户的在线状态
- 数据的单个键值不能太大，不能超过 1Mb 数据

## memcache 可以存储的数据类型
整型、浮点型、布尔型、字符串型、数组型、对象类型、空类型

## memcache 相关算法

1、惰性过期机制

说明：memcached 内部不会监视记录是否过期，而是在 get 时查看记录的时间戳，检查记录是否过期，这种技术被称为惰性过期。

好处：减少监控过期产生的开销

2、最近最少使用算法

缓存空间已满，将使用频率最低数据进行删除。

## memcache 常见问题

### 1、缓存雪崩

场景：项目缓存同一时间失效

问题：瞬间几万次、几千万次的同时访问数据库，数据库崩溃。

解决：

①不要集中设置缓存有效期

②控制缓存在闲时过期

③主从复制、读写分离

### 2、永久数据被踢

原因：因为惰性过期机制和最少使用机制导致

解决：永久数据和飞=非永久数据分开存放

​                                                                                                                                               