---
title: echo (int)((0.1+0.7)*10)输出的结果是？
categories: [其他]
tags: [面试]
---

## 代码

```php
<?php
echo (int)((0.1+0.7)*10);
```

## 输出

```shell
7
```

## 分析

如果你仔细看过在PHP手册中，对于浮点数据类型的说明，就会看到其中有专门的一个警告提示，就谈到这个问题：

关于浮点数精度的警告：显然简单的十进制分数如同 `0.1` 或 `0.7` 不能在不丢失一点点精度的情况下转换为内部二进制的格式。

这就会造成混乱的结果：

例如，`floor((0.1+0.7)*10)` 通常会返回 `7` 而不是预期中的  `8`，因为该结果内部的表示其实是类似 `7.9`。  

这和一个事实有关，那就是不可能精确的用有限位数表达某些十进制分数。例如，十进制的 `1/3` 变成了 `0.3`。  

所以永远不要相信浮点数结果精确到了最后一位，也永远不要比较两个浮点数是否相等。如果确实需要更高的精度，应该使用任意精度数学函数或者 `gmp` 函数。

实际上，并不是PHP会有这种现象，对于其他计算机语言，类似的浮点数问题也是差不多的。

