---
title: 冒泡排序解析
date: 2020-08-12
tags:
 - 排序
categories:
 - 算法
---

## 冒泡排序原理

比较两个相邻的元素，将值大的元素换到右边。

## 冒泡排序思路

依次比较相邻的两个数，将比较小的数放在前边，比较大的数放在后边。

## 代码

```php
/**
 * 冒泡正序排序
 * @param $arr=[2, 3, 5, 1]
 */
public function sort($arr)
{
    $counts = count($arr);
    if ($counts <= 1) return;
    for ($i = 0; $i < $counts - 1; $i++) {
        for ($j = 0; $j < $counts - $i - 1; $j++) {
            if ($arr[$j] > $arr[$j + 1]) {
                $tmp = $arr[$j];
                $arr[$j] = $arr[$j + 1];
                $arr[$j + 1] = $tmp;
            }
        }
        print_r("第" . $i . "比较后的值：");
        print_r($arr);
    }
    return $arr;
}
```

## 结果

```shell
冒泡正序排序
第0比较后的值：Array
(
    [0] => 2
    [1] => 3
    [2] => 1
    [3] => 5
)
第1比较后的值：Array
(
    [0] => 2
    [1] => 1
    [2] => 3
    [3] => 5
)
第2比较后的值：Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 5
)
最终结果：
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 5
)

```

```shell
2 3 5 1 #要比较的数组
2 3 1 5 #①：第一次比较，比较三次
2 1 3 5 #②：第二次比较，比较两次
1 2 3 5 #③：第三次比较，比较一次
```

①：第一次比较的时候，比较三次，选出最大的数值放到最后一位：

2 和 3 比较，2 小于 3，不动

3 和 5 比较，3 小于 5，不动

5 和 1比较，5 不小于 1，交换位置

结果：2 3 1 5

②：第二次比较的时候，比较两次，依旧选出最大的数值放到最后一位

2 和 3 比较，2 小于 3，不动

3 和 1 比较，3 不小于 1，交换位置

结果：2 1 3 5

③：第三次比较的时候，比较一次，依旧选出最大的数值放到最后一位

2 和 1 比较，2 不小于 1，交换位置

结果：1 2 3 5

## 解析

第一个 for 循环指的是外部循环的次数，也就是一共需要比较多少次，比较的次数是数组元素的 count-1 次，所以第一个 for 循环永远是 

```php
for ($i = 0; $i < $counts - 1; $i++) {
   ......
}
```

第二个 for 循环指的是元素内部比较多少次，元素之间的比较，每次都会选出一个最大值放在最后边，这样的话，每次比较都是 counts-$i-1次，所以第二个循环是：

```php
for ($j = 0; $j < $counts - $i - 1; $j++) {
   ......
}
```

进行元素之间比较的时候，如果第一个元素大于第二个元素，就需要交换位置，也就是满足此条件

```php
if ($arr[$j] > $arr[$j + 1]) {
    ......
}
```

满足这个条件后，就开始互换位置

```php
$tmp = $arr[$j];
$arr[$j] = $arr[$j + 1];
$arr[$j + 1] = $tmp;
```

最后输出的数组就是经过每次比较交换后的排序数组，

如果需要正序排列，只需要改变条件即可

```php
if ($arr[$j] < $arr[$j + 1]) {
   ......
}
```

## 动画演示

![](https://img.jbzj.com/file_images/article/201404/201449101643166.gif?201439101654)





​                                                                                                                                                                  